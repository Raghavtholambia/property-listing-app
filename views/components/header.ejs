<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  /* Mega dropdown */
.mega-dropdown .dropdown-menu {
  width: 800px;
  border: none;
  box-shadow: 0 4px 20px rgba(0,0,0,0.1);
}

.mega-menu .row {
  max-height: 300px;
  overflow-y: auto;
}

.mega-dropdown:hover .dropdown-menu {
  display: block;
}

</style>
</head>
<!-- views/components/navbar.ejs -->
<nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm sticky-top px-4 py-2">
  <div class="container-fluid">
    <!-- Logo -->
    <a class="navbar-brand fw-bold text-primary" href="/">rent Hub</a>

    <!-- Search Bar -->
    <form class="d-flex mx-auto w-50" action="/search" method="get">
      <input class="form-control me-2" type="search" name="q" placeholder="Search for items..." aria-label="Search">
      <button class="btn btn-outline-primary" type="submit">
        <i class="fa fa-search"></i>
      </button>
    </form>

    <!-- Right Side -->
    <div class="d-flex gap-3 align-items-center">
      <% if(currUser) { %>
        <a class="nav-link text-danger" href="/logout">Logout</a>
      <% } else { %>
        <a class="nav-link" href="/login">Login</a>
        <a class="nav-link" href="/register">Sign Up</a>
      <% } %>
      <a class="nav-link" href="/cart/view">
        <i class="fa fa-shopping-cart"></i> Cart
      </a>
    </div>
  </div>
</nav>

<!-- Category Bar -->
<div class="bg-white border-bottom">
  <ul class="nav justify-content-center py-2">
    <% categories.forEach(cat => { %>
      <li class="nav-item dropdown mega-dropdown">
        <a class="nav-link dropdown-toggle fw-semibold" href="/category/<%= cat %>" id="navbarDropdown<%= cat %>" role="button" data-bs-toggle="dropdown" aria-expanded="false">
          <%= cat %>
        </a>
        <div class="dropdown-menu mega-menu p-3" aria-labelledby="navbarDropdown<%= cat %>">
          <div class="row">
            <% categoryItems[cat].forEach(item => { %>
              <div class="col-md-4">
                <a class="dropdown-item" href="/listing/<%= item._id %>">
                  <%= item.itemName %>
                </a>
              </div>
            <% }) %>
          </div>
        </div>
      </li>
    <% }) %>
  </ul>
</div>
